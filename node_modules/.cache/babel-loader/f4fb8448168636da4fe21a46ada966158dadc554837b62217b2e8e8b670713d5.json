{"ast":null,"code":"import React,{useEffect,useState}from'react';import\"./orders.css\";import Loader from\"../../components/Loader/loader.js\";import Alert from'@mui/material/Alert';import Navbar from'../../components/Navbar/navbar.js';import{useSelector,useDispatch}from'react-redux';import{useNavigate}from'react-router';import{clearOrders,loadOrders,selectOrdersPending,selectCancelOrderSuccess,clearOrderStatusUpdates,selectOrders,selectOrdersLoadSuccess,selectCancelingOrderError}from'../../store/Orders/orderSlice.js';import{selectUserId,selectLoginSuccess,selectLogoutSuccess}from'../../store/User/userSlice.js';import{selectCheckoutSuccess}from'../../store/Cart/cartSlice.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=()=>{const sortingOptions=['','newest','oldest'];const[sort,setSort]=useState('');const orders=useSelector(selectOrders);const loadingOrders=useSelector(selectOrdersPending);const loadOrdersSuccess=useSelector(selectOrdersLoadSuccess);const cancelOrderSuccess=useSelector(selectCancelOrderSuccess);const userId=useSelector(selectUserId);const cancelOrderError=useSelector(selectCancelingOrderError);const loginSuccess=useSelector(selectLoginSuccess);const logoutSuccess=useSelector(selectLogoutSuccess);const dispatch=useDispatch();const navigate=useNavigate();const checkoutSuccess=useSelector(selectCheckoutSuccess);const handleChange=_ref=>{let{target}=_ref;setSort(target.value);};useEffect(()=>{if(userId){dispatch(loadOrders({userId,sort}));}},[dispatch,userId,sort]);useEffect(()=>{if(cancelOrderSuccess||loginSuccess||checkoutSuccess){dispatch(loadOrders({userId,sort}));}if(logoutSuccess){dispatch(clearOrders());}if(loadOrdersSuccess){dispatch(clearOrderStatusUpdates());}},[sort,userId,dispatch,cancelOrderSuccess,logoutSuccess,loginSuccess,checkoutSuccess,loadOrdersSuccess]);useEffect(()=>{if(loadingOrders){return/*#__PURE__*/_jsx(\"div\",{className:\"order__loading__container\",children:/*#__PURE__*/_jsx(Loader,{})});}},[]);if(!orders.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"order__history__container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"order_history\",children:\" No order history! \"}),/*#__PURE__*/_jsx(\"p\",{className:\"order__history__message\",children:\" Redirecting....\"}),setTimeout(()=>{navigate(\"/\");},3000),/*#__PURE__*/_jsx(Loader,{})]});}return/*#__PURE__*/_jsxs(\"section\",{className:\"orders\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"Orders__heading__container\",children:\" Order History \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Orders__container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"Orders__label\",children:\" Sort: \"}),/*#__PURE__*/_jsx(\"select\",{className:\"Orders__select__container\",name:\"sort\",value:sort,onChange:handleChange,children:sortOptions.map((sortOpt,i)=>/*#__PURE__*/_jsx(\"option\",{value:sortOpt,children:sortOpt},`${sortOpt}__${i}`))}),/*#__PURE__*/_jsxs(\"ul\",{className:\"Orders__list\",children:[loadOrdersError&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",msg:loadOrdersError,onClose:()=>dispatch(clearOrderStatusUpdates())}),orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsx(Order,{order:order})]},order.order_id))]})]})]});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","Loader","Alert","Navbar","useSelector","useDispatch","useNavigate","clearOrders","loadOrders","selectOrdersPending","selectCancelOrderSuccess","clearOrderStatusUpdates","selectOrders","selectOrdersLoadSuccess","selectCancelingOrderError","selectUserId","selectLoginSuccess","selectLogoutSuccess","selectCheckoutSuccess","jsx","_jsx","jsxs","_jsxs","Orders","sortingOptions","sort","setSort","orders","loadingOrders","loadOrdersSuccess","cancelOrderSuccess","userId","cancelOrderError","loginSuccess","logoutSuccess","dispatch","navigate","checkoutSuccess","handleChange","_ref","target","value","className","children","length","setTimeout","name","onChange","sortOptions","map","sortOpt","i","loadOrdersError","severity","msg","onClose","order","Order","order_id"],"sources":["/home/nuwhales/project/E-Commerce-Full-Stack-App/frontend/src/features/Orders/orders.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport \"./orders.css\";\nimport Loader from \"../../components/Loader/loader.js\";\nimport Alert from '@mui/material/Alert';\nimport Navbar from '../../components/Navbar/navbar.js';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router';\nimport { clearOrders, loadOrders, selectOrdersPending, selectCancelOrderSuccess, clearOrderStatusUpdates, selectOrders, selectOrdersLoadSuccess, selectCancelingOrderError} from '../../store/Orders/orderSlice.js';\nimport { selectUserId, selectLoginSuccess, selectLogoutSuccess } from '../../store/User/userSlice.js';\nimport { selectCheckoutSuccess } from '../../store/Cart/cartSlice.js';\n\n\n\nconst Orders = () => {\n  const sortingOptions = ['', 'newest', 'oldest'];\n  const [sort, setSort] = useState('');\n  const orders = useSelector(selectOrders);\n  const loadingOrders = useSelector(selectOrdersPending);\n  const loadOrdersSuccess = useSelector(selectOrdersLoadSuccess);\n  const cancelOrderSuccess = useSelector(selectCancelOrderSuccess);\n  const userId = useSelector(selectUserId);\n  const cancelOrderError = useSelector(selectCancelingOrderError);\n  const loginSuccess = useSelector(selectLoginSuccess);\n  const logoutSuccess = useSelector(selectLogoutSuccess);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const checkoutSuccess = useSelector(selectCheckoutSuccess);\n\n\n  const handleChange = ({target}) => {\n    setSort(target.value);\n  };\n\n\n  useEffect(() => {\n    if(userId) {\n      dispatch(loadOrders({userId, sort}))\n    }\n  }, [dispatch, userId, sort]);\n\n\n  useEffect(() => {\n    if(cancelOrderSuccess || loginSuccess || checkoutSuccess) {\n      dispatch(loadOrders({userId, sort}))\n    }\n    if(logoutSuccess) {\n      dispatch(clearOrders());\n    }\n    if(loadOrdersSuccess) {\n      dispatch(clearOrderStatusUpdates())\n    }\n  }, [sort, userId, dispatch, cancelOrderSuccess, logoutSuccess, loginSuccess, checkoutSuccess, loadOrdersSuccess]);\n\n\n  useEffect(() => {\n    if(loadingOrders) {\n      return (\n        <div className=\"order__loading__container\">\n         <Loader />\n        </div>\n      );\n    }\n  }, []);\n\n  if(!orders.length) {\n    return (\n      <div className=\"order__history__container\">\n        <h1 className=\"order_history\"> No order history! </h1>\n        <p className=\"order__history__message\"> Redirecting....</p>\n        {setTimeout(() => {\n          navigate(\"/\")\n        }, 3000)}\n        <Loader />\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"orders\">\n     <h2 className=\"Orders__heading__container\"> Order History </h2>\n     <div className=\"Orders__container\">\n      <span className=\"Orders__label\"> Sort: </span>\n      <select className=\"Orders__select__container\" name=\"sort\" value={sort} onChange={handleChange}>\n      {sortOptions.map((sortOpt,i) => <option key={`${sortOpt}__${i}`} value={sortOpt}>{sortOpt}</option>)}\n      </select>\n     <ul className=\"Orders__list\">\n     {loadOrdersError && <Alert severity=\"error\" msg={loadOrdersError} onClose={() => dispatch(clearOrderStatusUpdates())}/>}\n     {orders.map((order) => <li key={order.order_id}> <Order order={order}/></li>)}\n     </ul>\n    </div>\n   </section>\n  );\n}\n\nexport default Orders;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}