{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./login.css\";import Loader from'../../components/Loader/loader.js';import Button from'@mui/material/Button';import AccountCircleIcon from'@mui/icons-material/AccountCircle';import Alert from'@mui/material/Alert';import{Link,useNavigate}from'react-router-dom';import TextInput from'@mui/material/TextField';import{login,selectLogginIn,selectLoginSuccess,selectLoginError,selectSessionSuccess,clearUserStatusUpdates}from'../../store/User/userSlice.js';import{useSelector,useDispatch}from'react-redux';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const logginIn=useSelector(selectLogginIn);const loginSuccess=useSelector(selectLoginSuccess);const loginError=useSelector(selectLoginError);const sessionSuccess=useSelector(selectSessionSuccess);const dispatch=useDispatch();let navigate=useNavigate();const handleChange=_ref=>{let{target}=_ref;if(target.name==='username'){setUsername(target.value);}else if(target.name==='password'){setPassword(target.value);}};const handleClick=e=>{e.preventDefault();if(e.target.id==='login-button'){dispatch(login({username,password}));}};if(logginIn){return/*#__PURE__*/_jsx(\"div\",{className:\"login__loader\",children:/*#__PURE__*/_jsx(Loader,{})});};useEffect(()=>{dispatch(clearUserStatusUpdates());},[dispatch]);useEffect(()=>{if(sessionSuccess){navigate('/home');}},[sessionSuccess,dispatch]);useEffect(()=>{if(loginSuccess){setUsername('');setPassword('');navigate('/');dispatch(clearStatusUserUpdates());}},[loginSuccess,navigate,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login__container\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",method:\"post\",action:\"\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login__form__title\",children:\" Login \"}),loginError&&/*#__PURE__*/_jsx(Alert,{msg:loginError,onClose:()=>dispatch(clearStatusUserUpdates())}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"p\",{className:\"Login__registerLink\",children:\" New User? Please Register! \"})}),/*#__PURE__*/_jsx(\"p\",{children:\" Enter Username: \"}),/*#__PURE__*/_jsx(TextInput,{name:\"Username\",name:\"username\",value:username,onChange:handleChange}),/*#__PURE__*/_jsx(\"p\",{children:\" Enter Password: \"}),/*#__PURE__*/_jsx(TextInput,{name:\"Password\",name:\"password\",type:\"password\",value:password,onChange:handleChange})]}),/*#__PURE__*/_jsx(Button,{name:\"login-button\",fullWidth:true,onClick:handleClick,children:\" Login \"})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Loader","Button","AccountCircleIcon","Alert","Link","useNavigate","TextInput","login","selectLogginIn","selectLoginSuccess","selectLoginError","selectSessionSuccess","clearUserStatusUpdates","useSelector","useDispatch","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","logginIn","loginSuccess","loginError","sessionSuccess","dispatch","navigate","handleChange","_ref","target","name","value","handleClick","e","preventDefault","id","className","children","clearStatusUserUpdates","method","action","msg","onClose","to","onChange","type","fullWidth","onClick"],"sources":["/home/nuwhales/project/E-Commerce-Full-Stack-App/frontend/src/features/Login/login.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport \"./login.css\";\nimport Loader from '../../components/Loader/loader.js';\nimport Button from '@mui/material/Button';\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport Alert from '@mui/material/Alert';\nimport { Link, useNavigate } from 'react-router-dom';\nimport TextInput from '@mui/material/TextField';\nimport { login, selectLogginIn, selectLoginSuccess, selectLoginError, selectSessionSuccess, clearUserStatusUpdates } from '../../store/User/userSlice.js';\nimport { useSelector, useDispatch } from 'react-redux';\n\n\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const logginIn = useSelector(selectLogginIn);\n  const loginSuccess = useSelector(selectLoginSuccess);\n  const loginError = useSelector(selectLoginError);\n  const sessionSuccess = useSelector(selectSessionSuccess);\n  const dispatch = useDispatch();\n  let navigate = useNavigate();\n\n\n  const handleChange = ({target}) => {\n    if(target.name === 'username') {\n      setUsername(target.value);\n    }\n    else if (target.name === 'password') {\n      setPassword(target.value);\n    }\n  };\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    if(e.target.id === 'login-button') {\n      dispatch(login({username, password}));\n    }\n  }\n\n\n  if(logginIn) {\n      return (\n       <div className=\"login__loader\">\n        <Loader />\n       </div>\n      );\n  };\n\n  useEffect(() => {\n    dispatch((clearUserStatusUpdates()))\n  }, [dispatch]);\n\n  useEffect(() => {\n    if(sessionSuccess) {\n      navigate('/home')\n    }\n  }, [sessionSuccess, dispatch]);\n\n  useEffect(() => {\n    if(loginSuccess) {\n      setUsername('');\n      setPassword('');\n      navigate('/');\n      dispatch(clearStatusUserUpdates());\n    }\n  }, [loginSuccess, navigate, dispatch]);\n\n  return (\n    <div className=\"login__container\">\n     <form className=\"login__form\" method=\"post\" action=\"\">\n      <h3 className=\"login__form__title\"> Login </h3>\n      {loginError && <Alert msg={loginError} onClose={() => dispatch(clearStatusUserUpdates())}/>}\n      <Link to='/register'><p className=\"Login__registerLink\"> New User? Please Register! </p></Link>\n      <p> Enter Username: </p><TextInput name=\"Username\" name=\"username\" value={username} onChange={handleChange}/>\n      <p> Enter Password: </p><TextInput name=\"Password\" name=\"password\" type=\"password\" value={password} onChange={handleChange}/>\n     </form>\n     <Button name=\"login-button\" fullWidth onClick={handleClick}> Login </Button>\n    </div>\n  );\n\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}