{"ast":null,"code":"import React,{useEffect,useState}from'react';import Alert from'@mui/material/Alert';import Navbar from'../../components/Navbar/navbar.js';import Loader from'../../components/Loader/loader.js';import{useSelector,useDispatch}from'react-redux';import{clearOrders,loadOrders,selectOrdersPending,selectCancelOrderSuccess,clearOrderStatusUpdates,selectOrders,selectOrdersLoadSuccess,selectCancelingOrderError}from'../../store/Orders/orderSlice.js';import{selectUserId,selectLoginSuccess,selectLogoutSuccess}from'../../store/User/userSlice.js';import{selectCheckoutSuccess}from'../../store/Cart/cartSlice.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=()=>{const sortingOptions=['','newest','oldest'];const[sort,setSort]=useState('');const orders=useSelector(selectOrders);const loadingOrders=useSelector(selectOrdersPending);const loadOrdersSuccess=useSelector(selectOrdersLoadSuccess);const cancelOrder=useSelector(selectCheckoutSuccess);const userId=useSelector(selectUserId);const cancelOrderError=useSelector(selectCancelingOrderError);const loginSuccess=useSelector(selectLoginSuccess);const logoutSuccess=useSelector(selectLogoutSuccess);const dispatch=useDispatch();const checkoutSuccess=useSelector(selectCheckoutSuccess);const handleChange=_ref=>{let{target}=_ref;setSort(target.value);};useEffect(()=>{if(userId){dispatch(loadOrders({userId,sort}));}},[dispatch,userId,sort]);useEffect(()=>{if(cancelOrderSuccess||loginSuccess||checkoutSuccess){dispatch(loadOrders({userId,sort}));}if(logoutSuccess){dispatch(clearOrders());}if(loadOrdersSuccess){dispatch(clearOrderStatusUpdates());}},[sort,userId,dispatch,cancelOrderSuccess,logoutSuccess,loginSuccess,checkoutSuccess,loadOrdersSuccess]);useEffect(()=>{if(loadingOrders){return/*#__PURE__*/_jsx(\"div\",{className:\"order__loading__container\",children:/*#__PURE__*/_jsx(Loader,{})});}},[]);if(!orders.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"order__history__container\",children:[/*#__PURE__*/_jsx(\"h2\",{classname:\"order_history\",children:\" No order history! \"}),/*#__PURE__*/_jsx(\"p\",{classNmae:\"order__history__message\",children:\" Please make an order! \"})]});}return/*#__PURE__*/_jsxs(\"section\",{className:\"orders\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"Orders__heading__container\",children:\" Order History \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Orders__container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"Orders__label\",children:\" Sort: \"}),/*#__PURE__*/_jsx(\"select\",{className:\"Orders__select__container\",name:\"sort\",value:sort,onChange:handleChange,children:sortOptions.map((sortOpt,i)=>/*#__PURE__*/_jsx(\"option\",{value:sortOpt,children:sortOpt},`${sortOpt}__${i}`))}),/*#__PURE__*/_jsxs(\"ul\",{className:\"Orders__list\",children:[loadOrdersError&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",msg:loadOrdersError,onClose:()=>dispatch(clearOrderStatusUpdates())}),orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsx(Order,{order:order})]},order.order_id))]})]})]});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","Alert","Navbar","Loader","useSelector","useDispatch","clearOrders","loadOrders","selectOrdersPending","selectCancelOrderSuccess","clearOrderStatusUpdates","selectOrders","selectOrdersLoadSuccess","selectCancelingOrderError","selectUserId","selectLoginSuccess","selectLogoutSuccess","selectCheckoutSuccess","jsx","_jsx","jsxs","_jsxs","Orders","sortingOptions","sort","setSort","orders","loadingOrders","loadOrdersSuccess","cancelOrder","userId","cancelOrderError","loginSuccess","logoutSuccess","dispatch","checkoutSuccess","handleChange","_ref","target","value","cancelOrderSuccess","className","children","length","classname","classNmae","name","onChange","sortOptions","map","sortOpt","i","loadOrdersError","severity","msg","onClose","order","Order","order_id"],"sources":["/home/nuwhales/project/e_commerce_app/frontend/src/src/features/Orders/orders.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Alert from '@mui/material/Alert';\nimport Navbar from '../../components/Navbar/navbar.js';\nimport Loader from '../../components/Loader/loader.js';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearOrders, loadOrders, selectOrdersPending, selectCancelOrderSuccess, clearOrderStatusUpdates, selectOrders, selectOrdersLoadSuccess, selectCancelingOrderError} from '../../store/Orders/orderSlice.js';\nimport { selectUserId, selectLoginSuccess, selectLogoutSuccess } from '../../store/User/userSlice.js';\nimport { selectCheckoutSuccess } from '../../store/Cart/cartSlice.js';\n\n\n\nconst Orders = () => {\n  const sortingOptions = ['', 'newest', 'oldest'];\n  const [sort, setSort] = useState('');\n  const orders = useSelector(selectOrders);\n  const loadingOrders = useSelector(selectOrdersPending);\n  const loadOrdersSuccess = useSelector(selectOrdersLoadSuccess);\n  const cancelOrder = useSelector(selectCheckoutSuccess);\n  const userId = useSelector(selectUserId);\n  const cancelOrderError = useSelector(selectCancelingOrderError);\n  const loginSuccess = useSelector(selectLoginSuccess);\n  const logoutSuccess = useSelector(selectLogoutSuccess);\n  const dispatch = useDispatch();\n  const checkoutSuccess = useSelector(selectCheckoutSuccess);\n\n\n  const handleChange = ({target}) => {\n    setSort(target.value);\n  };\n\n\n  useEffect(() => {\n    if(userId) {\n      dispatch(loadOrders({userId, sort}))\n    }\n  }, [dispatch, userId, sort]);\n\n\n  useEffect(() => {\n    if(cancelOrderSuccess || loginSuccess || checkoutSuccess) {\n      dispatch(loadOrders({userId, sort}))\n    }\n    if(logoutSuccess) {\n      dispatch(clearOrders());\n    }\n    if(loadOrdersSuccess) {\n      dispatch(clearOrderStatusUpdates())\n    }\n  }, [sort, userId, dispatch, cancelOrderSuccess, logoutSuccess, loginSuccess, checkoutSuccess, loadOrdersSuccess]);\n\n\n  useEffect(() => {\n    if(loadingOrders) {\n      return (\n        <div className=\"order__loading__container\">\n         <Loader />\n        </div>\n      );\n    }\n  }, []);\n\n  if(!orders.length) {\n    return (\n      <div className=\"order__history__container\">\n        <h2 classname=\"order_history\"> No order history! </h2>\n        <p classNmae=\"order__history__message\"> Please make an order! </p>\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"orders\">\n     <h2 className=\"Orders__heading__container\"> Order History </h2>\n     <div className=\"Orders__container\">\n      <span className=\"Orders__label\"> Sort: </span>\n      <select className=\"Orders__select__container\" name=\"sort\" value={sort} onChange={handleChange}>\n      {sortOptions.map((sortOpt,i) => <option key={`${sortOpt}__${i}`} value={sortOpt}>{sortOpt}</option>)}\n     </select>\n     <ul className=\"Orders__list\">\n     {loadOrdersError && <Alert severity=\"error\" msg={loadOrdersError} onClose={() => dispatch(clearOrderStatusUpdates())}/>}\n     {orders.map((order) => <li key={order.order_id}> <Order order={order}/></li>)}\n     </ul>\n    </div>\n   </section>\n  );\n}\n\nexport default Orders;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}