{"ast":null,"code":"import React,{useState,useEffect}from'react';import Loader from'../../components/Loader/loader.js';import Button from'@mui/material/Button';import Avatar from'@mui/material/Avatar';import Alert from'@mui/material/Alert';import{Link,useNavigate}from'react-router-dom';import TextInput from'@mui/material/TextField';import{login,selectLogginIn,selectLoginSuccess,selectLoginError,selectSessionSuccess,clearUserStatusUpdates}from'../../store/User/userSlice.js';import{useSelector,useDispatch}from'react-redux';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const loggingIn=useSelector(selectLogginIn);const loginSuccess=useSelector(selectLoginSuccess);const loginErorr=useSelector(selectLoginError);const sessionSuccess=useSelector(selectSessionSuccess);const dispatch=useDispatch();let navigate=useNavigate();const handleChange=_ref=>{let{target}=_ref;if(target.name==='username'){setUsername(target.value);}else if(target.password==='password'){setPassword('target.value');}};const handleClick=e=>{e.preventDefault();if(e.target.id==='login-button'){dispatch(login({username,password}));}};if(logginIn){return/*#__PURE__*/_jsx(Loader,{});};useEffect(()=>{dispatch(clearStatusUserUpdates());},[dispatch]);useEffect(()=>{if(sessionSuccess){navigate('/home');}},[sessionSuccess,dispatch]);useEffect(()=>{if(loginSuccess){setUsername('');setPassword('');navigate('/');dispatch(clearStatusUserUpdates());}},[loginSuccess,navigate,dispatch]);return/*#__PURE__*/_jsx(\"div\",{className:\"login__container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",method:\"post\",action:\"\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login__form__title\",children:\" Login \"}),/*#__PURE__*/_jsx(Avatar,{children:\" H \"}),loginError&&/*#__PURE__*/_jsx(Alert,{msg:loginError,onClose:()=>dispatch(clearStatusUserUpdates())}),/*#__PURE__*/_jsx(TextInput,{name:\"Username\",value:username,onChange:handleChange}),/*#__PURE__*/_jsx(TextInput,{name:\"Password\",value:password,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{name:\"Login\",fullWidth:true,onClick:handleClick}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"p\",{className:\"Login__registerLink\",children:\" New User? Please Register! \"})})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Loader","Button","Avatar","Alert","Link","useNavigate","TextInput","login","selectLogginIn","selectLoginSuccess","selectLoginError","selectSessionSuccess","clearUserStatusUpdates","useSelector","useDispatch","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","loggingIn","loginSuccess","loginErorr","sessionSuccess","dispatch","navigate","handleChange","_ref","target","name","value","handleClick","e","preventDefault","id","logginIn","clearStatusUserUpdates","className","children","method","action","loginError","msg","onClose","onChange","fullWidth","onClick","to"],"sources":["/home/nuwhales/project/e_commerce_app/frontend/src/src/features/Login/login.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Loader from '../../components/Loader/loader.js';\nimport Button from '@mui/material/Button';\nimport Avatar from '@mui/material/Avatar';\nimport Alert from '@mui/material/Alert';\nimport { Link, useNavigate } from 'react-router-dom';\nimport TextInput from '@mui/material/TextField';\nimport { login, selectLogginIn, selectLoginSuccess, selectLoginError, selectSessionSuccess, clearUserStatusUpdates } from '../../store/User/userSlice.js';\nimport { useSelector, useDispatch } from 'react-redux';\n\n\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const loggingIn = useSelector(selectLogginIn);\n  const loginSuccess = useSelector(selectLoginSuccess);\n  const loginErorr = useSelector(selectLoginError);\n  const sessionSuccess = useSelector(selectSessionSuccess);\n  const dispatch = useDispatch();\n  let navigate = useNavigate();\n\n\n  const handleChange = ({target}) => {\n    if(target.name === 'username') {\n      setUsername(target.value);\n    }\n    else if (target.password === 'password') {\n      setPassword('target.value');\n    }\n  };\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    if(e.target.id === 'login-button') {\n      dispatch(login({username, password}));\n    }\n  }\n\n\n  if(logginIn) {\n      return (\n        <Loader />\n      )\n  };\n\n  useEffect(() => {\n    dispatch(clearStatusUserUpdates())\n  }, [dispatch]);\n\n  useEffect(() => {\n    if(sessionSuccess) {\n      navigate('/home')\n    }\n  }, [sessionSuccess, dispatch]);\n\n  useEffect(() => {\n    if(loginSuccess) {\n      setUsername('');\n      setPassword('');\n      navigate('/');\n      dispatch(clearStatusUserUpdates());\n    }\n  }, [loginSuccess, navigate, dispatch]);\n\n  return (\n    <div className=\"login__container\">\n     <form className=\"login__form\" method=\"post\" action=\"\">\n      <h3 className=\"login__form__title\"> Login </h3>\n      <Avatar> H </Avatar>\n      {loginError && <Alert msg={loginError} onClose={() => dispatch(clearStatusUserUpdates())}/>}\n      <TextInput name=\"Username\" value={username} onChange={handleChange}/>\n      <TextInput name=\"Password\" value={password} onChange={handleChange}/>\n      <Button name=\"Login\" fullWidth onClick={handleClick}/>\n      <Link to='/register'><p className=\"Login__registerLink\"> New User? Please Register! </p></Link>\n     </form>\n    </div>\n  );\n\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}